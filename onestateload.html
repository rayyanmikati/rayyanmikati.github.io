---
layout: default
---

  <svg></svg>

<script src="https://d3js.org/topojson.v2.min.js"></script>
<script>

// path:hover {
//   fill-opacity: .7;
// }
  var width = 900, height = 500;

  var svg = d3.select("svg")
    .attr("width", width)
    .attr("height", height);

  d3.json("../states.json", function(error, data){

    // converts Topojson to GeoJSON
    console.log(data);
    // make sure to use the right key in data.objects!
     //var featureCollection = data; // Jana use this one!
    var featureCollection = topojson.feature(data, data.objects.states);

    //console.log(featureCollection);


    // initializes a map projection
    // projection types: https://github.com/d3/d3-geo#azimuthal-projections
     var proj = d3.geoAlbersUsa() // Rayyan use this one!
      .fitSize([width, height], featureCollection);

    // creates a path generator
    var path = d3.geoPath()
      .projection(proj);

    var states = svg.selectAll("path")
      .data(featureCollection.features);

    // country codes: https://en.wikipedia.org/wiki/ISO_3166-1_numeric
    states.enter().append("path")
      .attr("d", path)
      .attr("stroke", "#888")
      .attr("stroke-width", 1)
      .attr("fill", "#01DCC1")
      //   function(d){
      //   return d.id == "076" ? "green" : "#ccc";
      // }
      // )
    ;

    // coordinate points are reversed! ex. [longitude, latitude]
    // var points = [
    //   {"name": "Boston", "coords": [-71.0589, 42.3601]},
    // ];

    // var points = svg.selectAll("circle")
    //   .data(points);
    //
    // points.enter().append("circle")
    //   .attr("transform", function(d){
    //     return "translate(" + proj(d.coords) + ")";
    //   })
    //   .attr("fill", "red")
    //   .attr("r", 10);

  });


d3.queue()//No data for Hawaii
    .defer(d3.csv, "SpeciesList.csv")
    .defer(d3.csv, "alabama.csv")
    .defer(d3.csv, "Alaska.csv")
    .defer(d3.csv, "arizona.csv")
    .defer(d3.csv, "arkansas.csv")
    .defer(d3.csv, "california.csv")
    .defer(d3.csv, "colorado.csv")
    .defer(d3.csv, "connecticut.csv")
    .defer(d3.csv, "delaware.csv")
    .defer(d3.csv, "florida.csv")
    .defer(d3.csv, "georgia.csv")
    .defer(d3.csv, "idaho.csv")
    .defer(d3.csv, "illinois.csv")
    .defer(d3.csv, "indiana.csv")
    .defer(d3.csv, "iowa.csv")
    .defer(d3.csv, "kansas.csv")
    .defer(d3.csv, "kentucky.csv")
    .defer(d3.csv, "louisiana.csv")
    .defer(d3.csv, "maine.csv")
    .defer(d3.csv, "maryland.csv")
    .defer(d3.csv, "massachusetts.csv")
    .defer(d3.csv, "michigan.csv")
    .defer(d3.csv, "Minneso.csv")
    .defer(d3.csv, "mississippi.csv")
    .defer(d3.csv, "missouri.csv")
    .defer(d3.csv, "montana.csv")
    .defer(d3.csv, "nebraska.csv")
    .defer(d3.csv, "nevada.csv")
    .defer(d3.csv, "newhampshire.csv")
    .defer(d3.csv, "newjersey.csv")
    .defer(d3.csv, "newmexico.csv")
    .defer(d3.csv, "newyork.csv")
    .defer(d3.csv, "northcarolina.csv")
    .defer(d3.csv, "northdakota.csv")
    .defer(d3.csv, "ohio.csv")
    .defer(d3.csv, "oklahoma.csv")
    .defer(d3.csv, "oregon.csv")
    .defer(d3.csv, "pennsylvania.csv")
    .defer(d3.csv, "rhodeisland.csv")
    .defer(d3.csv, "southcarolina.csv")
    .defer(d3.csv, "southdakota.csv")
    .defer(d3.csv, "tennessee.csv")
    .defer(d3.csv, "texas.csv")
    .defer(d3.csv, "utah.csv")
    .defer(d3.csv, "vermont.csv")
    .defer(d3.csv, "virginia.csv")
    .defer(d3.csv, "washington.csv")
    .defer(d3.csv, "westvirginia.csv")
    .defer(d3.csv, "wisconsin.csv")
    .defer(d3.csv, "wyoming.csv")




    // .defer, d3.csv("arkansas.csv");
///.defer(d3.request, "http://www.google.com:81")
    .awaitAll(function(error, results) {
      if (error) throw error;
      console.log(results);
    results.forEach(function(data, i) {
      if (i != 0) {
        data.forEach(function(d) {
          d.SpeciesTotal = +d.SpeciesTotal;
          d.Year = +d.Year;
        })}

        results = data.filter(function(d, i) {
          return d.Aou = "1770";

        });
        var nestedState = d3.nest()
            .key(function(d, i) {
              return d.statenum;
            })
            .entries(results);
          nestedState.forEach(function(d) {
            d.SpeciesTotal = d3.sum(d.values, function(x, i){
              return x.SpeciesTotal;
            })
            console.log(d.key, d.SpeciesTotal)
            })
        // var svg = d3.select("body").append("svg")
        //       .attr("width", 1500)
        //       .attr("height", 1000);

        // var draw = function(results) {
        //
        //     var svg = d3.select("svg");
        //
        //     var circles = svg.selectAll("circle").data(results);
        //
        //
        //     var dataExtent = d3.extent(results, function(d, i) {
        //         return d.SpeciesTotal;
        //       });
        //
        //         console.log(dataExtent);
        //
        //
        //     var radius = d3.scaleLinear()
        //       .domain(dataExtent)
        //       .range([5, 50]);
        //
        //
        //     circles.enter().append("circle")
        //     .transition()
        //     .duration(2000)
        //       .attr("fill", "#FF239E")
        //
        //       .attr("cy", function(d, i) {
        //         return 200 + (100 * Math.floor(i/10))
        //       })
        //       .attr("cx", function(d, i) {
        //         return 60 + (120 * (i % 10))
        //       })
        //       .attr("r", function(d, i) {
        //         return radius(d.SpeciesTotal)
        //       });
        //
        //     };

        var nestedYear = d3.nest()
            .key(function(d, i) {
              return d.Year;
              // return d.Year, d.statenum;//this didn't work but why?
            })
            .entries(results);
          nestedYear.forEach(function(d) {
            d.SpeciesTotal = d3.sum(d.values, function(x, i) {
              return x.SpeciesTotal;
            })
            console.log(d.key, d.SpeciesTotal)
          })
          // draw(nestedYear);

});

});



///ATTEMPT #1
  // var results = x.SpeciesTotal
  // var svg = d3.select("body").append("svg")
  //       .attr("width", 1000)
  //       .attr("height", 10000);
  //
  // var draw = function() {
  //     var results = x.SpeciesTotal;//defining the variable data
  //     var circles = svg.selectAll("circle")//makes the circles respond to the veriable data
  //       .data(results);
  //
  //   //enter
  //   circles.enter()
  //     .append("circle")
  //     .transition()
  //     .duration(1000)
  //       .attr("fill", "pink")
  //       .attr("cx", function(d, i) { return 60 + (120 * i);
  //             })
  //       .attr("cy", 60)
  //       .attr("r", function (d) {
  //         return d;
  //             });
  // draw(results);
  //
  //         }


//OTHER SHIT
    // q.awaitAll(function(error, data) {
    //   if (error) throw error;
    //   console.log(data);
    // });
// d3.csv("Minneso.csv", function(error, data) {
//   data.forEach(function(d) {
//     d.SpeciesTotal = +d.SpeciesTotal;
//     d.Year = +d.Year;
//   });
//
//   data = data.filter(function(d, i) {
//     return d.Year >= 1980;
//   });
//
//   var nestedData = d3.nest()
//     .key(function(d, i) {
//       return d.Year;
//     })
//     .entries(data);
//   nestedData.forEach(function(d) {
//     d.SpeciesTotal = d3.sum(d.values, function(x, i) {
//       return x.SpeciesTotal;
//     })
//     console.log(d.key, d.SpeciesTotal)
//   })
//
// });

//      THIS IS JUST SOME JUNK FOR ME TO REFERENCE WHEN I ADD CIRCLES
// var svg = d3.select("body").append("svg")
//       .attr("width", 1000)
//       .attr("height", 400);
// var draw = function() {
//     var data = randomData();//defining the variable data
//       console.log(data);
//     var circles = svg.selectAll("circle")//makes the circles respond to the veriable data
//       .data(data);
//
// //enter
// circles.enter()
//   .append("circle")
//   .transition()
//   .duration(1000)
//     .attr("fill", "steelblue")
//     .attr("cx", function(d, i) { return 60 + (120 * i);
//           })
//     .attr("cy", 60)
//     .attr("r", function (d) {
//       return d;
//           });


</script>
